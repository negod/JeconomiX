<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:p="http://primefaces.org/ui">
    <h:head>
    </h:head>
    <h:body>
        <h:form id="#{viewId.userGroupForm}">            
            <p:dataTable id="#{viewId.userGroupTable}" 
                         var="group" 
                         value="#{usersGroupBacking.tableModel}" 
                         widgetVar="#{viewVar.userGroupsTable}" 
                         emptyMessage="#{usersMsg.cannotFindUserGroupsWithProperties}" 
                         filteredValue="#{usersGroupBacking.filteredTableData}" 
                         selectionMode="single"                         
                         selection="#{usersGroupBacking.selectedTableData}"
                         paginator="true"
                         rows="20">
                
                <p:ajax event="rowSelect" 
                        update=":#{viewId.userGroupForm}:#{viewId.editUserGroupDialog}"
                        oncomplete="#{viewVar.editUserGroupsDialog}.show()"/>   

                <p:column id="groupNameColumn" 
                          filterBy="#{group.groupName}" 
                          headerText="#{usersMsg.groupName}"
                          filterMatchMode="startsWith">
                    <h:outputText value="#{group.groupName}" />
                </p:column>
            </p:dataTable>

            <p:panelGrid id="createNewUserPanel" columns="1" >                
                <p:commandButton value="#{usersMsg.addGroup}" 
                                 oncomplete="#{viewVar.createUserGroupsDialog}.show()"
                                 update="#{viewId.createUserGroupDialog}"
                                 ajax="true"/>
            </p:panelGrid>

            <!-- ADD Group -->
            <ui:include src="/secure/usergroup/dialogs/createUserGroup.xhtml">
                <ui:param name="dialogID" value="#{viewId.createUserGroupDialog}"/>
                <ui:param name="dialogVar" value="#{viewVar.createUserGroupsDialog}"/>
                <ui:param name="userTableID" value="#{viewId.userGroupTable}"/>
                <ui:param name="backing" value="#{usersGroupBacking}"/>
            </ui:include>
            
            <!-- Edit Group -->
            <ui:include src="/secure/usergroup/dialogs/editUserGroup.xhtml">
                <ui:param name="dialogID" value="#{viewId.editUserGroupDialog}"/>
                <ui:param name="dialogVar" value="#{viewVar.editUserGroupsDialog}"/>
                <ui:param name="userTableID" value="#{viewId.userGroupTable}"/>
                <ui:param name="backing" value="#{usersGroupBacking}"/>
            </ui:include>
            
        </h:form>
    </h:body>
</html>
