<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:p="http://primefaces.org/ui">
    <h:head>
        <h:outputStylesheet library="css" name="jeconomix.css"  />
    </h:head>
    
    <h:body>
        
        <ui:include src="/secure/commons/messages.xhtml"/>

        <p:layout fullPage="true">

            <p:layoutUnit position="north" size="100" header="Top" resizable="true" closable="true" collapsible="true">
                <h:outputText value="North unit content." />
            </p:layoutUnit>

            <p:layoutUnit position="south" size="100" header="Bottom" resizable="true" closable="true" collapsible="true">
                <h:outputText value="South unit content." />
            </p:layoutUnit>

            <p:layoutUnit position="west" size="300" header="Välj månad" resizable="false" closable="true" collapsible="true">

                <p:accordionPanel value="#{budgetBacking.months}"
                                  var="name" 
                                  dynamic="true">
                    <p:ajax event="tabChange" 
                            listener="#{budgetBacking.setCurrentMonth}"                            
                            update=":#{viewId.budgetForm}:test"/>                     
                    <p:tab title="#{name}"> 
                        <p:panelGrid columns="2" >
                            <p:outputLabel value="Inkomster" for="incomeLabel"/>
                            <p:outputLabel value="#{budgetBacking.currentBudget.totalIncome}" id="incomeLabel"/>
                            <p:outputLabel value="Utgifter" for="expenseLabel"/>
                            <p:outputLabel value="#{budgetBacking.currentBudget.totalExpense}" id="expenseLabel"/>
                            <p:outputLabel value="Totalt" for="totalLabel"/>
                            <p:outputLabel value="#{budgetBacking.currentBudget.total}" id="totalLabel"/>
                        </p:panelGrid>
                    </p:tab>
                </p:accordionPanel>
            </p:layoutUnit>

            <p:layoutUnit position="east" size="200" header="Right" resizable="true" closable="true" collapsible="true" effect="drop">
                <h:outputText value="Right unit content." />
            </p:layoutUnit>

            <p:layoutUnit position="center" header="Budget">

                <h:form id="#{viewId.budgetForm}" >

                    <!-- Budgettabeller -->
                    <p:panelGrid columns="1" id="test">
                        <ui:include src="/secure/jeconomix/budget/budget/tables/expenseTable.xhtml" />
                        <ui:include src="/secure/jeconomix/budget/budget/tables/incomeTable.xhtml" />
                        <!-- <ui:include src="/secure/jeconomix/budget/budget/tables/totalTable.xhtml" />-->
                        <ui:include src="/secure/jeconomix/budget/budget/dialogs/createBudget.xhtml" /> 
                    </p:panelGrid>

                </h:form>
            </p:layoutUnit>
        </p:layout>
    </h:body>
</html>
